<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Document</title>
  </head>
  <body>
    <h1>Promise, Async & Await Handson</h1>
    <h2>
      Q1. Write one example explaining how you can write a callback function.
    </h2>
    <pre>
Code:

let displayOutput = document.querySelectorAll("span");
function calculate(num1, num2) {
  return num1 * num2;
}

function displayData(name, age) {
  displayOutput[0].innerHTML = `${name} : age is ${age}`;
}

displayData("Jonny", calculate(20, 15));</pre
    >
    <p>
      Ouput:
      <br />
      <span></span>
      <br />
    </p>
    <h2>
      Q2. Write a callback function to print numbers from 1 to 7, in which 1
      should be printed after 1 sec, 2 should be printed after 2 sec, 3 should
      be printed after 3 sec, and so on. Explain callback hell. Numbers 1 2 3 4
      5 6 7.
    </h2>
    <pre>
Code:

function callbackHell() {
  setTimeout(() => {
    console.log("1");
    setTimeout(() => {
      console.log("2");
      setTimeout(() => {
        console.log("3");
        setTimeout(() => {
          console.log("4");
          setTimeout(() => {
            console.log("5");
            setTimeout(() => {
              console.log("6");
              setTimeout(() => {
                console.log("7");
              }, 7000);
            }, 6000);
          }, 5000);
        }, 4000);
      }, 3000);
    }, 2000);
  }, 1000);
}</pre
    >
    <button onclick="callbackHell()">Click Here</button>
    <h2>
      Q3. Write the promise function to print numbers from 1 to 7, in which 1
      should be printed after 1 sec, 2 should be printed after 2 sec, 3 should
      be printed after 3 sec, and so on. Numbers 1 2 3 4 5 6 7.
    </h2>
    <pre>
Code:

function promisePrint() {
  function printNumbersWithDelay(num, delay) {
    let counter = 1;
    return new Promise((resolve, reject) => {
      const interval = setInterval(() => {
        console.log(counter);
        counter++;
        if (counter > num) {
          clearInterval(interval);
          resolve();
        }
      }, delay);
    });
  }
  printNumbersWithDelay(7, 1000)
    .then(() => {
      console.log("All done!");
    })
    .catch((error) => {
      console.error(error);
    });
}
    </pre>
    <button onclick="promisePrint()">Click Here</button>
    <h2>
      Q4. Create a promise function accepting an argument, if yes is passed to
      the function then it should go to resolved state and print Promise
      Resolved, and if nothing is passed then it should go to reject the state
      and catch the error and print Promise Rejected.
    </h2>
    <p>=></p>
    <pre>
Code:

let variable = true;    
function promiseFunction(p) {
  return new Promise((res, rej) => {
    if (variable === true) {
      res("Promise resolved Successfully...");
    } else {
      rej("Promise Rejected!!!");
    }
  });
}
promiseFunction(variable)
  .then((data) => console.log(data))
  .catch((err) => console.log(err));

    </pre>
    <h2>Q5. Create examples to explain callback function</h2>
    <p>
      => A Callback function is a function passed into another function as an
      argument, which is then invoked inside the outer function to complete the
      action. Here is an example of a callback function.
    </p>
    <pre>
Code:

function greet(name, callback) {
  console.log("Hi" + " " + name);
  callback();
}

// callback function
function callMe() {
  console.log("I am callback function");
}

// passing function as an argument
greet("Sahil", callMe);</pre
    >
    <p>
      Here callMe is a callback function which is invoked inside the greet
      function and passed as an argument to it.
    </p>
    <h2>Q6. Create examples to explain callback hell function</h2>
    <p>
      => When we have callbacks inside another callbacks, the code becomes
      difficult to manage and it starts taking the shape of a pyramid. This
      callbacks gets dependent for the pervious callbacks to be executed. This
      is called Callback Hell.
    </p>
    <pre>
Code:

function callbackHell2() {
  setTimeout(() => {
    console.log("Step 1");
    setTimeout(() => {
      console.log("Step 2");
      setTimeout(() => {
        console.log("Step 3");
        setTimeout(() => {
          console.log("Step 4");
        }, 1000);
      }, 1000);
    }, 1000);
  }, 1000);
}</pre
    >
    <button onclick="callbackHell2()">Click Here to see the Ouput</button>
    <p>
      Here we can see setTimeout function is used inside one another. Now at any
      point if the callback hell fells to execute the fuction, the pyramid
      breaks down and the callback will stop.
    </p>
    <h2>Q7. Create examples to explain promises function</h2>
    <p>
      => Promise functions are special types of functions in Javascript which
      works Asynchronously. It returns the value when the function or returns
      the error when the function does not execute successfully. Successful
      completion are returned using resolve function call whereas unsuccessful
      completion are returned using reject function call.
    </p>
    <pre>
Code:

Example 1 (code is executed in resolve state):
let value = true;
function promiseExample(p) {
  return new Promise((resolve, reject) => {
    if (value === true) {
      resolve("Promise Program ran successfully!!!");
    } else {
      reject("Promise Program caught an error!!!");
    }
  });
}
promiseExample(value)
  .then((data) => console.log(data))
  .catch((err) => console.log(err));
    </pre>
    <button onclick="example1()">
      Click Here to see the Ouput of Example 1
    </button>
    <pre>
Example 2 (code is rejected):: 
let value2 = false;
function promiseExample2(p) {
  return new Promise((resolve, reject) => {
    if (value2 === true) {
      resolve("Promise Program ran successfully!!!");
    } else {
      reject("Promise Program caught an error!!!");
    }
  });
}
promiseExample2(value)
  .then((data) => console.log(data))
  .catch((err) => console.log(err));
    </pre>
    <button onclick="example2()">
      Click Here to see the Ouput of Example 2
    </button>
    <h2>Q8. Create examples to explain async await function</h2>
    <p>
      => There is a special method to work with promises which are Async Await
      functions. A function can be made async using async keyword. await works
      inside async function only. await helps us by making the javascript wait
      until the promise completes returns some result.
    </p>
    <pre>
Code:

function asyncAwait() {
  function delay2Sec() {
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve("Promise resolved after 2 seconds!!!");
      }, 2000);
    });
  }

  async function asyncCalling() {
    console.log("calling....");
    const output = await delay2Sec();
    console.log(output);
    // Expected output: "resolved"
  }

  asyncCalling();
}</pre
    >
    <button onclick="asyncAwait()">Click Here to see the Ouput</button>
    <h2>Q9. Create examples to explain promise.all function</h2>
    <p>
      => Promise.all function takes all of the promises as the input and returns
      a single promise.The returned promise executes when all of the promises
      are fulfilled. It gets rejected when any of the input promise is rejected.
    </p>
    <pre>
Code:

function Abc() {
  return new Promise((res, rej) => {
    if (20 % 2 === 0) {
      res("This is Even Number.");
    } else {
      rej("This is Odd Number.");
    }
  });
}
const promiseVar = new Promise((res, rej) => {
  if (true) {
    res("Hi EA23 !!!");
  } else {
    rej("Sorry!!!");
  }
});
Promise.all([Abc(), promiseVar])
  .then((data) => console.log(data))
  .catch((err) => console.log(err));</pre
    >
    <button onclick="promiseAll()">Click Here to see the Ouput</button>
    <p>
      Here we can see by using Promise.all method we can combine all the promise
      functions in an array form with a single ".then" and ".catch". ".then"
      will respond if and only if all the promise functions are resolved. If any
      promise functions are rejected, then all the promises functions are
      rejected and catch will be executed.This is a drawback of Promise All
      function.
    </p>

    <script src="./script.js"></script>
  </body>
</html>
